use std::ops::RangeInclusive;
mod section6; // å®Ÿä½“ã¯ãƒ«ãƒ¼ãƒˆ/section6.rs

fn main() {
    println!("Hello, world!");
    print!("Hello, ");
    print!("Rust!");
    println!("Hello, {}", "students");

    // ã‚³ãƒ¡ãƒ³ãƒˆ
    /* è¤‡æ•°è¡Œã“ã‚ã‚“ã¨
     */

    let a: i32 = 1;
    println!("{}", a);
    //a = 2;
    //let mut b: i32 = 2;
    //b = 4; // ä½¿ã£ã¦ãªã„ã®dçµµè­¦å‘Š
    //let d: i32; // é€”ç«¯ã«è­¦å‘Š
    const B: i32 = 2; // é–¢æ•°ã®å†…å´ã§ã‚‚å®£è¨€ã§ãã‚‹ constã¯å‹åã®å®£è¨€ãŒå¿…é ˆ
    println!("const Bã¯ {}", B);

    let float1:f64 = 3.142;
    let float2:f64 = float1; // å‹ã®æŒ‡å®šã¯æ¨è«–ã«ã¾ã‹ã›ã¦æ›¸ã‹ãªãã¦ã‚‚è‰¯ã„ã—ã€æ›¸ã„ã¦ã‚‚è‰¯ã„ã€‚VSCodeãŒå‡ºã—ã¦ã‚‹ã®ã‚’æ¶ˆãã†ã¨ã—ã¦ï¼šãŒæ¶ˆãˆãŸã‚Šã™ã‚‹ã®ã«æ³¨æ„ã€‚
    println!("floatå‹ã®å¤‰æ•° {} {}", float1, float2);


    numeric();
    tupple();
    array();
    vector();
    string_type();
    functions();
    blocks();
    ifs();
    matchs();
    loops();

    section6::sec6main::lesson();
}

//const B: i32 = 2; // é–¢æ•°ã®å¤–å´ã§å®£è¨€ã§ãã‚‹
//let c = 1; //ã§ããªã„

fn numeric() {
    // æ•°å€¤å‹
    // iãŒç¬¦å·ä»˜ãã€uãŒç¬¦å·ãªã—ã€fãŒæµ®å‹•å°æ•°ç‚¹æ•° +æ•°å­—ã€‚ã€€isizeã¨ã„ã†ã®ã‚‚ã€‚

    let a: i32 = 1; //ã“ã‚Œã‚‰ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
    let b: f64 = 2.0;

    let c: u16 = 3;
    let d: f32 = 4.0f32;
    // å››å‰‡æ¼”ç®—ã¯åŒã˜å‹åŒå£«ã®ã¿ã€‚

    let f: f64 = 1 as f64 + 2.0; //as ã§ã‚­ãƒ£ã‚¹ãƒˆ

    // è«–ç†å‹
    let g: bool = false;
    let h: bool = 1 == 1;
    println!("{}{}{}{}{}{}{}", a, b, c, d, f, g, h);
}

fn tupple() {
    // ã‚¿ãƒ—ãƒ«
    let t1: (i32, bool, f64) = (1, true, 2.0);
    let t2: (f64, i32, bool) = (2.0, 1, true);

    // ã‚¿ãƒ—ãƒ«ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ãƒ‡ãƒãƒƒã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒã„ã‚‹ã€‚
    println!("{:?}", t1); // (1, true, 2.0)

    let i: f64 = t2.0; // å°æ•°ç‚¹ã§ãªãã€t2ã®1ç•ªã‚ã®è¦ç´ 
    println!("{}", i); // 2ï¼0
    let (x, y, _) = t2;
    println!("{}{}", x, y); // 21

    //let u: () = (); // ãƒ¦ãƒ‹ãƒƒãƒˆå‹ã€‚ä½•ã‚‚è¿”ã•ãªã„é–¢æ•°ã®æˆ»ã‚Šå€¤ãªã©ã«ã€‚
    //println!("u: {}", u);
}

fn array() {
    // é…åˆ—
    let l1: [i32; 3] = [1, 2, 3]; // å‹å®£è¨€ã®ã‚ã¨ã¯ã‚»ãƒŸã‚³ãƒ­ãƒ³ãªã®ã§æ³¨æ„ã€‚3ã¯è¦ç´ ã®æ•°
    let l2: [i32; 10] = [0; 10]; // 10ã“ã«å…¨éƒ¨0ã‚’å…¥ã‚Œã‚‹
    println!("é…åˆ—{:?}", l1);
    println!("é…åˆ—{:?}", l2);

    let i: i32 = l1[0];
    let [x, y, z] = l1;
    println!("é…åˆ—ã®ä¸­èº«ã‚’å–ã‚Šå‡ºã™ {} {}ã€€{}ã€€{}", i, x, y, z); // 1 1 2 3
    let l3: &[i32] = &l1[0..2];
    println!("ã‚¹ãƒ©ã‚¤ã‚¹ {:?}", l3); //[1, 2]
    let l4: &[i32] = &l1[0..=2];
    println!("ã‚¹ãƒ©ã‚¤ã‚¹ {:?}", l4); //[1, 2, 3]
    let l5: &[i32] = &l1[..];
    println!("ã‚¹ãƒ©ã‚¤ã‚¹å…¨éƒ¨ {:?}", l5); //[1, 2, 3]
}

fn vector() {
    // ãƒ™ã‚¯ã‚¿å‹
    let v1: Vec<i32> = vec![1, 2, 3];
    let v2: Vec<i32> = vec![0; 10];
    let mut v3: Vec<i32> = Vec::new();
    v3.push(1);
    v3.push(100);
    println!("ãƒ™ã‚¯ã‚¿ {:?}", v1);
    println!("ãƒ™ã‚¯ã‚¿ {:?}", v2);
    println!("ãƒ™ã‚¯ã‚¿ {:?}", v3);

    let x: Option<i32> = v3.pop();
    println!("æœ€å¾Œã®å€¤ã‚’å–å¾— {:?}", x); // Some(100) Rustã«ã¯nullãŒãªã„ï¼
    println!("å–ã‚‰ã‚ŒãŸã‚ã¨ã®ãƒ™ã‚¯ã‚¿ {:?}", v3); //[1]

    let y: i32 = v3[0]; // ã“ã“ã§[1]ç•ªç›®ã‚’å–ã‚‹ã¨å­˜åœ¨ã—ãªã„ã®ã§panic
    let z: Option<&i32> = v3.get(100); //100ç•ªç›®ã‚’ã¨ã‚‹ ã“ã“ã®index: ã¯VSCodeãŒè¡¨ç¤ºã—ã¦ã„ã‚‹ã ã‘ã§å®Ÿéš›ã¯å­˜åœ¨ã—ãªã„
    println!("ç•ªå·æŒ‡å®šã§å–å¾— {:?}", y); // 1
    println!("å­˜åœ¨ã—ãªã„100ç•ªç›®ã‚’å–å¾— {:?}", z); // None
}

// ã“ã“ã§stringType ã¨ã„ã†é–¢æ•°åã«ã™ã‚‹ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒè­¦å‘Šã‚’å‡ºã—ã¦ãã‚Œã‚‹ã€‚
fn string_type() {
    // æ–‡å­—å‹
    let c1: char = 'a';
    let c2: char = '@';
    let c3: char = 'ğŸ˜‡';
    println!("charå‹ {}{}{}", c1, c2, c3);

    // æ–‡å­—åˆ—å‹
    let s1: &str = "Rust"; //æ–‡å­—åˆ—ã‚¹ãƒ©ã‚¤ã‚¹ã¯å¤‰æ›´ä¸å¯
                           //s1 = s1 + "plus"; ã‚¨ãƒ©ãƒ¼ãŸãã•ã‚“
    println!("æ–‡å­—åˆ—ã‚¹ãƒ©ã‚¤ã‚¹å‹ {}", s1);

    // Stringå‹
    let s2: String = String::from("Python");
    let s3: String = "Java".to_string();
    let mut s4: String = String::from("Hello!");
    s4.push_str(", Rust world"); // ã“ã®è¡Œã®string: ã¯VSCodeãŒå‡ºã—ã¦ã‚‹ã ã‘ã§å­˜åœ¨è¶³å†…
    println!("æ–‡å­—åˆ—å‹ {}{}{}", s2, s3, s4);
    println!("æ–‡å­—åˆ—å‹ {}", s4 + " and friend is Golang"); // å·¦è¾ºStringã€å³è¾ºæ–‡å­—åˆ—ã‚¹ãƒ©ã‚¤ã‚¹ãªã‚‰çµåˆã§ãã‚‹

    // ä¸‹ã®ã‚ˆã†ã«formatã§ã‚‚çµåˆã§ãã‚‹ã€‚ã¡ãªã¿ã«ã“ã“ã§s4ã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨æ‰€æœ‰æ¨©ãŒç§»å‹•ã—ãŸã‚ã¨ã§å€Ÿç”¨ã—ãŸã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚
    let s5: String = format!("{}{}", s3, " and otherlanguages");
    println!("{}", s5); // Python and other languages
}

fn functions() {
    // é–¢æ•° ãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ã€‚

    println!("é–¢æ•°ã‚³ãƒ¼ãƒ« {}", add(100, 200));
    let c = add(200, 500); // æ›¸ã‹ãªãã¦ã‚‚ c: i32ã«ãªã‚‹ã€‚èƒŒæ™¯è‰²ãŒå¤‰ã‚ã‚‹ã®ã§VSCodeãŒè¡¨ç¤ºã—ã¦ã„ã‚‹ã€‚
    println!("é–¢æ•°ã‚³ãƒ¼ãƒ« {}", c);
    let say_hello_result:() = say_hello(); // å‹æ¨è«–ã§ãƒ¦ãƒ‹ãƒƒãƒˆå‹ãŒè¡¨ç¤ºã€‚ å¤‰æ•°åã‚‚ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ã§ãªã„ã¨è­¦å‘Šã—ã¦ãã‚Œã‚‹ã€‚
    println!("é–¢æ•°ã‚³ãƒ¼ãƒ« {:?}", say_hello_result); // ()
}

fn add(a: i32, b: i32) -> i32 {
    a + b // é–¢æ•°ã®æœ€å¾Œã§ã‚»ãƒŸã‚³ãƒ­ãƒ³ãªã—ã§æ›¸ãã¨returnæ–‡æ‰±ã„ã€‚ã“ã¡ã‚‰ãŒä¸€èˆ¬çš„ã€‚
}
fn say_hello() {
    println!("Hi!")
}

/*
å¼ã¨æ–‡ãŒåˆ¥ã€‚Rustã¯å¼ãƒ™ãƒ¼ã‚¹ã€‚
å¼ã¯ã‚»ãƒŸã‚³ãƒ­ãƒ³ãŒãªã„ã€‚
*/

fn blocks() {
    {
        println!("ãƒ–ãƒ­ãƒƒã‚¯ã®ä¸­ã ã‚ˆ");
        let x = 1;
        println!("xã¯ {}", x);
    }
    //println!("{}", x); //ãƒ–ãƒ­ãƒƒã‚¯ã®å¤–ã§ã¯ä½¿ãˆãªã„ã€‚

    // ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°
    let y = 10;
    println!("yã‚’å®£è¨€ã—10 {}", y);
    {
        let y = 5;
        println!("yã‚’ãƒ–ãƒ­ãƒƒã‚¯å†…ã§å†åº¦å®£è¨€ã—5ã‚’ä»£å…¥ {}", y);
    }
    println!("ãƒ–ãƒ­ãƒƒã‚¯ã®å¤–ã«æˆ»ã‚‹ã¨yã¯... {}", y); // 10ã«æˆ»ã‚‹
    let xxx = {
        100;
    };
    println!("xxxã¯ {:?}", xxx); // ()ã«ãªã‚‹

}

fn ifs() {
    // IFã¯æ–‡ã§ãªãå¼ã€‚
    let x = 5;
    // ifã®æ¡ä»¶éƒ¨åˆ†ã¯å¸¸ã«è«–ç†å‹å¿…é ˆã€‚0ã¨ã‹ç©ºæ–‡å­—ã¨ã‹ã¯å…¥ã‚‰ãªã„ã€‚
    if x> 0 {
        println!("xã¯0ã‚ˆã‚Šå¤§ãã„");
    }
    // å¼ãªã®ã§ã“ã†ã‚‚æ›¸ã‘ã‚‹
    let y = if x > 0 {
        x
    } else {
        //"0" // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
        0
    };
    println!("y= {:?}", y); //5

}

fn matchs() {
    //ãƒãƒƒãƒå¼
    let x = 0;
    match x {
        0 => println!("ã‚¼ãƒ­ã ã‚ˆ"), // ã²ã¨ã¤ã ã£ãŸã‚‰ã‚«ãƒ³ãƒ
        1 => {
            println!("ã„ã¡ã ã‚ˆ");
            println!("ã‚‚ã†ã„ã£ã¡ã‚‡"); // è¤‡æ•°ã‚ã£ãŸã‚‰ãƒ–ãƒ­ãƒƒã‚¯ã§å›²ã£ã¦ã‚»ãƒŸã‚³ãƒ­ãƒ³
        },
        // ã“ã“ã§matchå¼ã‚’çµ‚ã‚ã‚‰ã›ã‚‹ã¨i32ã®ç¯„å›²ã‚’ç¶²ç¾…ã—ã¦ã„ãªã„ã®ã§ã‚¨ãƒ©ãƒ¼ã€‚ã™ã”ã„ã€‚
        //non-exhaustive patterns: `i32::MIN..=-1_i32` and `2_i32..=i32::MAX` not covered the matched value is of type `i32`
        _ => println!("ãã®ãŸ"),
    }
}

fn loops() {
    // loop
    let mut cnt = 0;
    loop {
        println!("ç„¡é™ãƒãƒ­ãƒ¼ï¼ Ctr+Cå¿…é ˆ!ã¨è¦‹ã›ã‹ã‘ã¦break");
        if cnt == 5 {
            break;
        }
        cnt += 1;
    }

    // while ãªã‚‰ã‚ˆã‚Šç°¡æ½”
    let mut cnt2 = 0;
    while cnt2 <= 5 {
        println!("ä»Šåº¦ã¯while");
        cnt2 += 1;
    }

    for i in [1,2,3] {
        println!("ä»Šåº¦ã¯for {}", i); // 3å›å‡ºåŠ›
    }
    let r: RangeInclusive<i32> = 1..=10;
    for x in r { // ã“ã“ã§xï¼ši32ã¨æ›¸ãã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
        println!("for in ã§è‡ªä¹— {}", x * x); // 10å›å‡ºåŠ›
    }

}
